{"version":3,"sources":["../../routes/api.js"],"names":["express","require","router","Router","_","Correlation","pcorr","get","req","res","send","post","tr","body","numeric","keys","arr","forEach","k","push","map","d","n","Number","corr","console","log","json","module","exports"],"mappings":";;AAAA;;;AAGA,IAAMA,UAAUC,QAAQ,SAAR,CAAhB;AACA,IAAMC,SAASF,QAAQG,MAAR,EAAf;AACA,IAAMC,IAAIH,QAAQ,QAAR,CAAV;AACA,IAAMI,cAAcJ,QAAQ,kBAAR,CAApB;AACA,IAAMK,QAAQL,QAAQ,eAAR,CAAd;AACA;AACAC,OAAOK,GAAP,CAAW,GAAX,EAAgB,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AAChCA,QAAIC,IAAJ,CAAS,qBAAT;AACH,CAFD;;AAIAR,OAAOS,IAAP,CAAY,cAAZ,EAA4B,UAAUH,GAAV,EAAeC,GAAf,EAAoB;;AAE5C,QAAIG,KAAKJ,IAAIK,IAAJ,CAASC,OAAlB;AACA,QAAIC,OAAOX,EAAEW,IAAF,CAAOH,EAAP,CAAX;;AAEA,QAAII,MAAM,EAAV;AACAZ,MAAEa,OAAF,CAAUF,IAAV,EAAgB,UAAUG,CAAV,EAAa;AACzBF,YAAIG,IAAJ,CAASf,EAAEgB,GAAF,CAAMR,GAAGM,CAAH,CAAN,EAAa,UAAUG,CAAV,EAAa;AAC/B,gBAAIC,IAAIC,OAAOF,CAAP,CAAR;AACA;AACA,mBAAOC,CAAP;AACH,SAJQ,CAAT;AAKH,KAND;;AAQA,QAAIE,OAAOlB,MAAMU,GAAN,CAAX;AACAS,YAAQC,GAAR,CAAYF,IAAZ;AACAf,QAAIkB,IAAJ,CAAS;AACLZ,cAAMA,IADD;AAELS,cAAMA;AAFD,KAAT;AAIH,CApBD;;AAsBAI,OAAOC,OAAP,GAAiB3B,MAAjB","file":"api.js","sourcesContent":["/**\r\n * Created by hyunwoo on 2017-03-05.\r\n */\r\nconst express = require('express');\r\nconst router = express.Router();\r\nconst _ = require('lodash');\r\nconst Correlation = require('node-correlation');\r\nconst pcorr = require('compute-pcorr');\r\n/* GET users listing. */\r\nrouter.get('/', function (req, res) {\r\n    res.send('API Status : Active');\r\n});\r\n\r\nrouter.post('/correlation', function (req, res) {\r\n\r\n    var tr = req.body.numeric;\r\n    var keys = _.keys(tr);\r\n\r\n    var arr = [];\r\n    _.forEach(keys, function (k) {\r\n        arr.push(_.map(tr[k], function (d) {\r\n            var n = Number(d);\r\n            // if (_.isNaN(n)) n = 0;\r\n            return n;\r\n        }));\r\n    });\r\n\r\n    var corr = pcorr(arr);\r\n    console.log(corr);\r\n    res.json({\r\n        keys: keys,\r\n        corr: corr\r\n    });\r\n});\r\n\r\nmodule.exports = router;\r\n"]}