{"version":3,"sources":["../../src/radvis.axis.js"],"names":["RadvisAxis","controller","axis","stats","_","assign","$name","$","name","appendTo","x","z","axisDestPosition","index","Setting","Radvis","Height","weightCurrent","weightSum","rad","color","ratio","weight","console","log","active","Radius","THREE","Color","Axis","css","Background","Math","sin","PI","cos","setPosition","setColor","vector","RadvisController","projectPosition","camera","width","height","y","axisDestColor","r","g","b","val","min","max","v","Vector3","multiplyScalar","NodeScale"],"mappings":"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","file":"radvis.axis.js","sourcesContent":["/**\r\n * Created by hyunwoo on 2017-02-16.\r\n */\r\n\r\n\r\nclass RadvisAxis {\r\n    constructor(controller, axis, stats) {\r\n        this.controller = controller;\r\n        this.axis = axis;\r\n        _.assign(this, stats);\r\n        // console.log(this.controller.$canvas);\r\n        this.$name = $('<div class=\"axisHeader\">' + this.axis.name + '</div>').appendTo(controller.$);\r\n    }\r\n\r\n    setPosition(x, z) {\r\n        this.controller.axisDestPosition[this.axis.index * 6] = x;\r\n        this.controller.axisDestPosition[this.axis.index * 6 + 1] = -Setting.Radvis.Height / 2;\r\n        this.controller.axisDestPosition[this.axis.index * 6 + 2] = z;\r\n        this.controller.axisDestPosition[this.axis.index * 6 + 3] = x;\r\n        this.controller.axisDestPosition[this.axis.index * 6 + 4] = Setting.Radvis.Height / 2;\r\n        this.controller.axisDestPosition[this.axis.index * 6 + 5] = z;\r\n    }\r\n\r\n    updatePosition(weightCurrent, weightSum) {\r\n\r\n        let rad, color, x, z, ratio = (weightCurrent + this.axis.weight / 2) / weightSum;\r\n        console.log(this.axis.active);\r\n\r\n        if (this.axis.active) {\r\n            rad = Setting.Radvis.Radius;\r\n            color = new THREE.Color(Setting.Radvis.Axis.Color);\r\n            this.$name.css('opacity', 0.6)\r\n        } else {\r\n            rad = Setting.Radvis.Radius + 200;\r\n            color = new THREE.Color(Setting.Radvis.Background);\r\n            this.$name.css('opacity', 0.0)\r\n        }\r\n\r\n        x = Math.sin(Math.PI * 2 * ratio) * rad;\r\n        z = Math.cos(Math.PI * 2 * ratio) * rad;\r\n\r\n        this.setPosition(x, z);\r\n        this.setColor(color);\r\n\r\n    }\r\n\r\n    updateProjection() {\r\n        var vector = RadvisController.projectPosition(this.controller.camera,\r\n            this.controller.axisDestPosition[this.axis.index * 6],\r\n            this.controller.axisDestPosition[this.axis.index * 6 + 1],\r\n            this.controller.axisDestPosition[this.axis.index * 6 + 2],\r\n            this.controller.width,\r\n            this.controller.height\r\n        );\r\n\r\n        this.$name.css('left', vector.x - this.$name.width() / 2);\r\n        this.$name.css('top', vector.y);\r\n    }\r\n\r\n    setColor(color) {\r\n        this.controller.axisDestColor[this.axis.index * 6] = color.r;\r\n        this.controller.axisDestColor[this.axis.index * 6 + 1] = color.g;\r\n        this.controller.axisDestColor[this.axis.index * 6 + 2] = color.b;\r\n        this.controller.axisDestColor[this.axis.index * 6 + 3] = color.r;\r\n        this.controller.axisDestColor[this.axis.index * 6 + 4] = color.g;\r\n        this.controller.axisDestColor[this.axis.index * 6 + 5] = color.b;\r\n    }\r\n\r\n    get bottom() {\r\n        return THREE.Vector3(\r\n            this.controller.axisDestPosition[this.axis.index * 6],\r\n            this.controller.axisDestPosition[this.axis.index * 6 + 1],\r\n            this.controller.axisDestPosition[this.axis.index * 6 + 2],\r\n        );\r\n    }\r\n\r\n    get top() {\r\n        return THREE.Vector3(\r\n            this.controller.axisDestPosition[this.axis.index * 6 + 3],\r\n            this.controller.axisDestPosition[this.axis.index * 6 + 4],\r\n            this.controller.axisDestPosition[this.axis.index * 6 + 5],\r\n        );\r\n    }\r\n\r\n    get topScreen() {\r\n\r\n    }\r\n\r\n\r\n    located(val) {\r\n        var ratio = (val - this.min) / (this.max - this.min);\r\n        var x = this.controller.axisDestPosition[this.axis.index * 6] * ratio;\r\n        var y = this.controller.axisDestPosition[this.axis.index * 6 + 1] * ratio +\r\n            this.controller.axisDestPosition[this.axis.index * 6 + 4] * (1 - ratio);\r\n        var z = this.controller.axisDestPosition[this.axis.index * 6 + 5] * ratio;\r\n        var v = new THREE.Vector3(x, y, z).multiplyScalar(Setting.Radvis.NodeScale);\r\n        return v;\r\n    }\r\n\r\n}\r\n\r\n"]}