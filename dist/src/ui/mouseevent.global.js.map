{"version":3,"sources":["../../../src/ui/mouseevent.global.js"],"names":["__ContextMenu","$","contextKey","that","addContextItem","$item","name","action","disable","_","isNil","push","type","addContextSeparater","addContextSpacer","getContextItem","wrapper","menu","find","click","evt","stopPropagation","open","originalEvent","console","log","clear","addClass","css","clientX","clientY","forEach","item","appendTo","close","adjust","on","which","empty","removeClass"],"mappings":"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","file":"mouseevent.global.js","sourcesContent":["/**\r\n * Created by hyunwoo on 2017-02-17.\r\n */\r\n\r\n\r\nlet __ContextMenu;\r\n$(function () {\r\n    __ContextMenu = new function () {\r\n        const contextKey = '_contextItem';\r\n        var that = this;\r\n        this.addContextItem = function ($item, name, action, disable) {\r\n            if (_.isNil($item[contextKey])) $item[contextKey] = [];\r\n            $item[contextKey].push({\r\n                type: 'action',\r\n                name: name,\r\n                action: action,\r\n                disable: !_.isNil(disable) || _.isNil(action),\r\n            });\r\n            return that;\r\n        };\r\n\r\n        this.addContextSeparater = function ($item, name) {\r\n            $item[contextKey].push({\r\n                type: 'separater',\r\n                name: name,\r\n            });\r\n            return that;\r\n        };\r\n\r\n        this.addContextSpacer = function ($item) {\r\n            $item[contextKey].push({\r\n                type: 'spacer',\r\n            });\r\n            return that;\r\n        };\r\n\r\n        this.getContextItem = function ($item) {\r\n            if (_.isNil($item[contextKey])) return [];\r\n            return $item[contextKey];\r\n        };\r\n\r\n        this.wrapper = $('.contextmenu-wrapper');\r\n        this.menu = this.wrapper.find('.contextmenu');\r\n        this.menu.click(function (evt) {\r\n            evt.stopPropagation();\r\n        });\r\n\r\n\r\n        this.open = function (evt, $item) {\r\n            evt = evt.originalEvent;\r\n            console.log(evt);\r\n            that.clear();\r\n            that.wrapper.addClass('open');\r\n            that.menu.css('left', evt.clientX);\r\n            that.menu.css('top', evt.clientY);\r\n\r\n\r\n            // $('<div class=\"header\">Setting' +\r\n            //     '<div class=\"icon i material-icons\">settings</div>' +\r\n            //     '</div>').appendTo(that.menu);\r\n            _.forEach(__ContextMenu.getContextItem($item), function (item) {\r\n                if (_.isNil(item.type) || item.type == 'action') {\r\n                    var $item = $('<div class=\"item\">' + item.name + '</div>').appendTo(that.menu);\r\n                    if (!item.disable)\r\n                        $item.click(function () {\r\n                            item.action();\r\n                            __ContextMenu.close();\r\n                        });\r\n                    else $item.addClass('disable');\r\n                }\r\n                else if (item.type == 'separater') $('<div class=\"separater\">' + item.name + '</div>').appendTo(that.menu);\r\n                else if (item.type == 'spacer') $('<div class=\"spacer\"></div>').appendTo(that.menu);\r\n            });\r\n        };\r\n\r\n        this.adjust = function ($item) {\r\n            $item.on('mousedown', function (evt) {\r\n                if (evt.which == 3)\r\n                    __ContextMenu.open(evt, $item);\r\n            });\r\n        };\r\n\r\n        this.clear = function () {\r\n            that.menu.empty();\r\n        };\r\n\r\n        this.close = function () {\r\n            that.clear();\r\n            that.wrapper.removeClass('open');\r\n        };\r\n\r\n        this.wrapper.click(this.close);\r\n    };\r\n});\r\n\r\n"]}