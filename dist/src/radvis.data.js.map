{"version":3,"sources":["../../src/radvis.data.js"],"names":["__data","DataAxis","name","index","stats","active","spacing","Setting","Radvis","Axis","Geometry","value","spacing_center","uniqueIndex","power","DataSet","csv","mode","_","isNil","injectCsv","replace","rows","split","length","dropRight","keys","raw","map","row","transposRaw","TransposData","numeric","numericKeys","currentInjectAxisCount","forEach","d","values","drop","Number","some","v","isNaN","min","max","sigma","stdDeviation","median","mean","average","toString","__Formatter","number","Test","AxisLimit","AxisLimitCount","push","console","log","numericNodes","i","out","k","axis","sortBy","axisName","find","matrix","col","$","click","Color","__RadvisController","updateAxisColor","THREE"],"mappings":"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","file":"radvis.data.js","sourcesContent":["/**\n * Created by hyunwoo on 2017-02-15.\n */\n\nlet __data;\n\n\nclass DataAxis {\n    constructor(name, index, stats) {\n        this.active = true;\n        this.name = name;\n        this.spacing = Setting.Radvis.Axis.Geometry.spacing.value;\n        this.spacing_center = Setting.Radvis.Axis.Geometry.spacing_center.value;\n        this.uniqueIndex = this.index = index;\n        this.stats = stats;\n        this.power = Setting.Radvis.Axis.Geometry.power.value;\n\n    }\n\n}\n\nclass DataSet {\n    constructor(csv, mode) {\n        if (_.isNil(mode) || mode == 'csv') this.injectCsv(csv);\n    }\n\n    injectCsv(csv) {\n        csv = csv.replace(/\\r?\\n|\\r/gi, '\\n');\n        var rows = csv.split('\\n');\n        if (rows[rows.length - 1] == '')\n            rows = _.dropRight(rows);\n        this.keys = rows[0].split(',');\n\n        // this.keys = _.take(rows[0].split(','), 15);\n        this.raw = _.map(rows, function (row) {\n            return row.split(',');\n        });\n\n        this.transposRaw = DataSet.TransposData(this.raw);\n        var numeric = this.numeric = {};\n        var stats = this.stats = {};\n        var numericKeys = this.numericKeys = [];\n        var currentInjectAxisCount = 0;\n        _.forEach(this.transposRaw, function (d) {\n            var values = _.map(_.drop(d), function (d) {\n                return Number(d);\n            });\n\n            if (_.some(values, function (v) {\n                    return isNaN(v);\n                })) {\n                return;\n            }\n\n            stats[d[0]] = {\n                name: d[0],\n                value: values,\n                min: _.min(values),\n                max: _.max(values),\n                // variance: _.variance(values), // �л�\n                sigma: _.stdDeviation(values), // ǥ������\n                median: _.median(values), // �߾Ӱ�\n                mean: _.average(values),\n\n                toString: function () {\n                    return \"min: \" + __Formatter.number(this.min) + \"<br>\" +\n                        \"max: \" + __Formatter.number(this.max) + \"<br>\" +\n                        \"sigma: \" + __Formatter.number(this.sigma) + \"<br>\" +\n                        \"mean: \" + __Formatter.number(this.mean);\n                }\n            };\n            numeric[d[0]] = values;\n            // FOR TEST\n            if (Setting.Test.AxisLimit) {\n                if (currentInjectAxisCount < Setting.Test.AxisLimitCount) {\n                    numericKeys.push(d[0]);\n                    currentInjectAxisCount++;\n                }\n            } else numericKeys.push(d[0]);\n\n        });\n        console.log(numericKeys)\n        this.numericNodes = [];\n        for (var i = 0; i < numeric[numericKeys[0]].length; i++) {\n            var out = {};\n            _.forEach(this.numericKeys, function (k) {\n                out[k] = numeric[k][i];\n            });\n            this.numericNodes.push(out);\n        }\n\n        this.axis = _.map(this.numericKeys, function (k, i) {\n            return new DataAxis(k, i, stats[k]);\n        });\n    }\n\n\n    getSortedAxis() {\n        return _.sortBy(this.axis, function (axis) {\n            return axis.index;\n        })\n    }\n\n    findAxis(axisName) {\n        return _.find(this.axis, function (axis) {\n            return axis.name == axisName;\n        })\n    }\n\n    static TransposData(matrix) {\n        return _.map(matrix[0], function (col, i) {\n            return _.map(matrix, function (row) {\n                return row[i];\n            })\n        })\n    }\n\n\n}\n\n//\n// $.get('/data/credos_testing.csv', function (data) {\n//     __data = new DataSet(data);\n//     //createAxisVisibility();\n//     // Important! : Visualization Controlled based on Data\n//     createRadvis();\n//     __UI.injectData(__data);\n//     __UI.createSideTab();\n//     // create2DViewer();\n//     //createParallel();\n// });\n\n$(function () {\n    $('#axisColorApplier').click(function () {\n        Setting.Radvis.Axis.Color = 0xFF0000;\n        __RadvisController.updateAxisColor(new THREE.Color(Setting.Radvis.Axis.Color));\n    });\n});\n"]}