{"version":3,"sources":["../../src/firebase.wrapper.js"],"names":["config","apiKey","authDomain","databaseURL","storageBucket","messagingSenderId","__Firebase","that","fb","firebase","initializeApp","auth","user","undefined","isSetReferences","EventName","ChildAdded","ChildRemoved","ChildChange","authChange","addAuthChangeFunction","evt","push","usageData","DBRefDimensionList","DBRefDataList","callbackEvents","callbackDimensions","DataList","CurrentData","DimensionFieldList","setUsageData","d","callback","console","log","database","ref","uid","_id","once","then","snapshot","DataSet","val","_","isNil","forEach","v","event","on","addDimensionField","field","key","data","update","deleteDimensionField","releaseUsageData","off","storage","testDataUrl","providerGoogle","GoogleAuthProvider","onAuthStateChanged","setTimeout","$","html","displayName","initDBReferences","onDimension","unbind","error","remove","clearDBReferences","getDataList","signInWithGoogle","signInWithPopup","result","token","credential","accessToken","catch","errorCode","code","errorMessage","message","email","signInWithEmail","signOut","__UIStatic","Toast","open","window","location","getDataContent","deleteData","set","uploadData","f","refList","refRaw","updates","name","size","type","lastModified","overview","contents"],"mappings":"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","file":"firebase.wrapper.js","sourcesContent":["/**\n * Created by hyunwoo on 2017-02-16.\n */\nvar config = {\n    apiKey: \"AIzaSyBmWUxSYfDdIig4b_Nk_8zGW5VdDr1qY-M\",\n    authDomain: \"dradvis.firebaseapp.com\",\n    databaseURL: \"https://dradvis.firebaseio.com\",\n    storageBucket: \"dradvis.appspot.com\",\n    messagingSenderId: \"20687471588\"\n};\n\nlet __Firebase = new function () {\n    const that = this;\n\n    let fb = firebase.initializeApp(config);\n    let auth = fb.auth();\n    this.user = undefined;\n    let isSetReferences = false;\n\n    this.EventName = {\n        ChildAdded: 'child_added',\n        ChildRemoved: 'child_removed',\n        ChildChange: 'child_changed'\n    };\n\n\n    this.authChange = [];\n    this.addAuthChangeFunction = function (evt) {\n        that.authChange.push(evt);\n    };\n\n    let usageData;\n    let DBRefDimensionList;\n\n    let DBRefDataList;\n    let callbackEvents = {};\n    let callbackDimensions = {};\n    let DataList = this.DataList = {};\n    this.CurrentData = {};\n    this.DimensionFieldList = {};\n\n\n    this.setUsageData = function (d, callback) {\n        usageData = d;\n        console.log(\" Data & Dimension Event Injected\");\n        DBRefDimensionList = fb.database().ref(that.user.uid + '/list/' + d._id + '/dimension');\n        fb.database().ref(that.user.uid + '/raw/' + d._id).once('value').then(function (snapshot) {\n            that.CurrentData = new DataSet(snapshot.val());\n            callback(snapshot.val());\n        });\n\n        DBRefDimensionList.once('value').then(function (snapshot) {\n            if (_.isNil(snapshot.val())) return;\n            that.DimensionFieldList[snapshot.val()._id] = snapshot.val();\n            const val = snapshot.val();\n            _.forEach(callbackDimensions[that.EventName.ChildAdded], function (callback) {\n                _.forEach(val, function (v) {\n                    callback(v);\n                })\n            })\n        });\n\n        _.forEach(that.EventName, function (event) {\n            console.log('Alloc Dimension Event : ' + event);\n            DBRefDimensionList.on(event, function (snapshot) {\n                console.log(event, snapshot.val())\n                switch (event) {\n                    case that.EventName.ChildAdded:\n                    case that.EventName.ChildChange:\n                        that.DimensionFieldList[snapshot.val()._id] = snapshot.val();\n                        break;\n                    case that.EventName.ChildRemoved:\n                        delete that.DimensionFieldList[snapshot.val()._id];\n                        break;\n                }\n\n                _.forEach(callbackDimensions[event], function (callback) {\n                    callback(snapshot.val());\n                });\n            });\n        });\n    };\n\n    this.addDimensionField = function (field) {\n        const key = DBRefDimensionList.push().key;\n        let data = {};\n        field['_id'] = key;\n        data[key] = field;\n        DBRefDimensionList.update(data);\n    };\n\n    this.deleteDimensionField = function (field) {\n        console.log('delete field : ', that.user.uid + '/list/' + field._id + '/dimension/' + field._id);\n        let data = {};\n        data[field._id] = null;\n        DBRefDimensionList.update(data);\n    };\n\n    this.releaseUsageData = function () {\n        usageData = null;\n        console.log(\"Data & Dimension Event Released\");\n        if (!_.isNil(DBRefDimensionList)) DBRefDimensionList.off();\n        callbackDimensions = {};\n        that.DimensionFieldList = {};\n    };\n    this.storage = firebase.storage();\n    this.testDataUrl = 'https://firebasestorage.googleapis.com/v0/b/dradvis.appspot.com/o/credos_testing.csv?alt=media&token=27152d59-bf4a-41cf-8658-1c3581c08c5e';\n    let providerGoogle = new firebase.auth.GoogleAuthProvider();\n    fb.auth().onAuthStateChanged(function (user) {\n        console.log('auth change input');\n        setTimeout(function () {\n            that.user = user;\n            if (user) {\n                console.log('auth changed', user);\n                $('.userName').html(user.displayName);\n                initDBReferences();\n                isSetReferences = true;\n            } else {\n            }\n            _.forEach(that.authChange, function (d) {\n                d(user);\n            });\n        }, 100);\n\n\n        // __UIStatic.onAuthChange(user);\n    });\n\n\n    function initDBReferences() {\n        if (isSetReferences) return;\n        isSetReferences = true;\n\n        DBRefDataList = fb.database().ref(that.user.uid + '/list');\n\n        _.forEach(that.EventName, function (evt) {\n            DBRefDataList.on(evt, function (snapshot) {\n                switch (evt) {\n                    case 'child_added' :\n                    case 'child_changed' :\n                        DataList[snapshot.val()._id] = snapshot.val();\n                        break;\n                    case 'child_removed':\n                        delete DataList[snapshot.val()._id];\n                        break;\n                }\n                _.forEach(callbackEvents[evt], function (callback) {\n                    callback(snapshot.val());\n                });\n            });\n        });\n    }\n\n    this.on = function (evt, callback) {\n        if (_.isNil(callbackEvents[evt])) callbackEvents[evt] = [];\n        callbackEvents[evt].push(callback);\n        return callback;\n    };\n\n    this.onDimension = function (evt, callback) {\n        if (_.isNil(callbackDimensions[evt])) callbackDimensions[evt] = [];\n        callbackDimensions[evt].push(callback);\n        return callback;\n    };\n\n    this.unbind = function (evt, callback) {\n        if (_.isNil(callbackEvents[evt])) {\n            console.error('event not binded');\n            return;\n        }\n        if (_.isNil(callback)) callbackEvents[evt] = [];\n        else if (!_.isNil(callback)) callbackEvents[evt] = _.remove(callbackEvents[evt], callback);\n    };\n\n\n    function clearDBReferences() {\n\n    }\n\n    this.getDataList = function () {\n\n    };\n\n    this.signInWithGoogle = function () {\n        fb.auth().signInWithPopup(providerGoogle).then(function (result) {\n            var token = result.credential.accessToken;\n            var user = result.user;\n            // ...\n        }).catch(function (error) {\n            console.log(error);\n            // Handle Errors here.\n            var errorCode = error.code;\n            var errorMessage = error.message;\n            // The email of the user's account used.\n            var email = error.email;\n            // The firebase.auth.AuthCredential type that was used.\n            var credential = error.credential;\n            // ...\n        });\n    };\n\n    this.signInWithEmail = function () {\n\n    };\n\n    this.signOut = function () {\n        if (_.isNil(that.user)) {\n            __UIStatic.Toast.open(\"Auth Failed\");\n            return;\n        }\n\n        auth.signOut().then(function () {\n            that.user = undefined;\n            window.location = '/';\n        }, function (error) {\n            __UIStatic.Toast.open(\"SignOut Failed\");\n        });\n\n    };\n\n    this.getDataList = function () {\n        if (_.isNil(that.user)) {\n            __UIStatic.Toast.open(\"Auth Failed\");\n            return;\n        }\n    };\n\n\n    this.getDataContent = function (key) {\n        if (_.isNil(that.user)) {\n            __UIStatic.Toast.open(\"Auth Failed\");\n            return;\n        }\n    };\n\n    this.deleteData = function (d) {\n        console.log('deleteData:', d);\n        var ref = fb.database().ref(that.user.uid + '/list/' + d._id);\n        ref.set(null);\n    };\n\n\n    this.uploadData = function (f) {\n        console.log('uploadFile!?');\n        if (_.isNil(that.user)) {\n            __UIStatic.Toast.open(\"Auth Failed\");\n            return;\n        }\n        const refList = fb.database().ref(that.user.uid + '/list');\n        const refRaw = fb.database().ref(that.user.uid + '/raw');\n        const key = refList.push().key;\n\n        var updates = {};\n        updates[that.user.uid + '/list/' + key] = {\n            name: f.name,\n            size: f.size,\n            type: f.type,\n            lastModified: f.lastModified,\n            _id: key,\n            overview: 'Not Yet Set Overview',\n        };\n\n        updates[that.user.uid + '/raw/' + key] = f.contents;\n        fb.database().ref().update(updates);\n    };\n\n};\n\n$(function () {\n    //__Firebase.getDataList()\n});\n\n\n\n\n"]}