{"version":3,"sources":["../../../src/uiStaticFunctions/modal.js"],"names":["__Modal","that","$dimension","$","$dimensionTitle","find","$dimensionContent","$dimensionPos","$dimensionNeg","$dimensionAxisSelector","dimension","CreateDimensionModal","dimensionModal","click","removeClass","addClass","attr","focusout","corrNetwork","injectDataSet","info","data","corr","console","log","clearAxisList","_","forEach","keys","c","i","stats","addAxisList","createCorrGraph","CreateCorrNetwork","createComponentDropDown","name","listItem","selected","mode","setEdge","pos_powers","map","k","value","from","index","neg_powers","cs","x","maxVal","maxIndex","minVal","minIndex","y","push","v","addDimensionGroupItem","dgn","dgm","dgh","abs","Math","item","length","appendTo","open","opt","unbind","close","pos","action","empty","__Formatter","number","mean","min","max","median","sigma","box","hasClass","html","Modal"],"mappings":"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","file":"modal.js","sourcesContent":["/**\r\n * Created by hyunwoo on 2017-03-02.\r\n */\r\n\r\nconst __Modal = new function () {\r\n    const that = this;\r\n    const $dimension = $('#modalDimensionFieldMaker');\r\n\r\n    var $dimensionTitle = $dimension.find('.title');\r\n    var $dimensionContent = $dimension.find('.content');\r\n    var $dimensionPos = $dimension.find('.pos');\r\n    var $dimensionNeg = $dimension.find('.neg');\r\n    var $dimensionAxisSelector = $dimension.find('#axisListSelector');\r\n    this.dimension = {};\r\n\r\n    function CreateDimensionModal() {\r\n        var dimensionModal = this;\r\n        $dimension.find('.step').click(function () {\r\n            $dimension.find('.step').removeClass('select');\r\n            $dimension.find('.left .content').removeClass('select');\r\n\r\n            $(this).addClass('select');\r\n            $dimension.find('.left .content[page=' + $(this).attr(\"for\") + ']').addClass('select');\r\n        });\r\n\r\n        $('#DFName').focusout(() => {\r\n            // TODO Save Name TO FB\r\n        });\r\n        $('#DFOverview').focusout(() => {\r\n            // TODO Save Overview TO FB\r\n        });\r\n\r\n        var corrNetwork;\r\n        this.injectDataSet = function (info, data, corr) {\r\n            console.log(info, data, corr);\r\n            clearAxisList();\r\n            _.forEach(corr.keys, (c, i) => data.stats[c]['index'] = i);\r\n            _.forEach(data.stats, dimensionModal.addAxisList);\r\n            createCorrGraph('#correlationGraph', corr.keys, corr.corr);\r\n            corrNetwork = new CreateCorrNetwork('#correlationNetwork', corr.keys, corr.corr);\r\n            createComponentDropDown('#componentNetwork', {\r\n                name: \"Correlation Network Link Setting\",\r\n                listItem: [\r\n                    'Most Impact (ABS Correlation more that 0.7)',\r\n                    'Most Impact (ABS Correlation more that 0.5)',\r\n                    '^# Raw Correlation Graph',\r\n                    'Almost Same Correlation (Correlation more than 0.9)',\r\n                    'High Correlation (Correlation more than 0.7)',\r\n                    'Medium Correlation (Correlation more than 0.5)',\r\n                ],\r\n                selected: 'Most Impact (ABS Correlation more that 0.7)',\r\n            }, (mode) => {\r\n                corrNetwork.setEdge(mode)\r\n            });\r\n\r\n            var pos_powers = _.map(corr.keys, (k, i) => {\r\n                return {value: 0, from: [], name: k, index: i};\r\n            });\r\n\r\n            var neg_powers = _.map(corr.keys, (k, i) => {\r\n                return {value: 0, from: [], name: k, index: i};\r\n            });\r\n\r\n            _.forEach(corr.corr, (cs, x) => {\r\n                var maxVal = 0;\r\n                var maxIndex = -1;\r\n                var minVal = 0;\r\n                var minIndex = -1;\r\n                _.forEach(cs, (c, y) => {\r\n                    if (x == y) return;\r\n                    if (c < -.5) {\r\n                        minVal = c;\r\n                        minIndex = y;\r\n\r\n                    } else if (c > .5) {\r\n                        maxVal = c;\r\n                        maxIndex = y;\r\n                    }\r\n                    //\r\n                    // if (c < -0.7) {\r\n                    //     neg_powers[y].value += c;\r\n                    //     neg_powers[y].from.push({\r\n                    //         name: corr.keys[y],\r\n                    //         index: y,\r\n                    //     });\r\n                    // }\r\n                    //\r\n                    // if (c > 0.7) {\r\n                    //     pos_powers[y].value += c;\r\n                    //     pos_powers[y].from.push({\r\n                    //         name: corr.keys[y],\r\n                    //         index: y,\r\n                    //     });\r\n                    // }\r\n\r\n                });\r\n                if (minIndex != -1) {\r\n                    neg_powers[minIndex].value += minVal;\r\n                    neg_powers[minIndex].from.push({\r\n                        name: corr.keys[minIndex],\r\n                        index: minIndex,\r\n                    });\r\n                }\r\n\r\n                if (maxIndex != -1) {\r\n                    pos_powers[maxIndex].value += maxVal;\r\n                    pos_powers[maxIndex].from.push({\r\n                        name: corr.keys[maxIndex],\r\n                        index: maxIndex,\r\n                    });\r\n                }\r\n            });\r\n\r\n\r\n            _.forEach(neg_powers, (v) => addDimensionGroupItem(v));\r\n            _.forEach(pos_powers, (v) => addDimensionGroupItem(v));\r\n        };\r\n\r\n\r\n        var dgn = $('#DGNoneImpact');\r\n        var dgm = $('#DGMediumImpact');\r\n        var dgh = $('#DGHighImpact');\r\n\r\n        function addDimensionGroupItem(v) {\r\n            console.log(v);\r\n            var abs = Math.abs(v.value);\r\n            var item;\r\n            if (v.from.length > 2) {\r\n                if (v.value > 0)\r\n                    item = $(`<div class=\"item posHigh\">${v.name}</div>`).appendTo(dgh)\r\n                else item = $(`<div class=\"item negHigh\">${v.name}</div>`).appendTo(dgh)\r\n            } else if (abs > 0.2) {\r\n                if (v.value > 0)\r\n                    item = $(`<div class=\"item posMid\">${v.name}</div>`).appendTo(dgm)\r\n                else item = $(`<div class=\"item negMid\">${v.name}</div>`).appendTo(dgm)\r\n            } else {\r\n                // item = $(`<div class=\"item\">${v.name}</div>`).appendTo(dgn)\r\n            }\r\n        };\r\n\r\n        this.open = function (opt) {\r\n            $dimension.addClass('open');\r\n            $dimensionPos.unbind();\r\n            $dimensionPos.click(function () {\r\n                that.dimension.close();\r\n                opt.pos.action()\r\n            });\r\n        };\r\n\r\n        $dimension.find('.closer').click(function () {\r\n            console.log('?');\r\n            that.dimension.close();\r\n        });\r\n        this.close = function () {\r\n            $dimension.removeClass('open');\r\n        };\r\n\r\n        function clearAxisList() {\r\n            $dimension.find('#axisListSelector').empty();\r\n        };\r\n\r\n        this.addAxisList = function (value) {\r\n            let item = $(`<div class=\"item dimension\" index=\"${value.index}\">` +\r\n                `<div class=\"checkbox i material-icons\">check_box</div>` +\r\n                `<div class=\"axis\">${value.name}</div>` +\r\n                `<div class=\"value\"></div>` +\r\n                `<div class=\"value\">${__Formatter.number(value.mean)}</div>` +\r\n                `<div class=\"value\">${__Formatter.number(value.min)}</div>` +\r\n                `<div class=\"value\">${__Formatter.number(value.max)}</div>` +\r\n                `<div class=\"value\">${__Formatter.number(value.median)}</div>` +\r\n                `<div class=\"value\">${__Formatter.number(value.sigma)}</div>` +\r\n                `</div>`).appendTo($dimensionAxisSelector);\r\n            item.click(function () {\r\n                const box = $(this).find('.checkbox');\r\n                if (box.hasClass('unchecked')) {\r\n                    box.removeClass('unchecked');\r\n                    box.html('check_box');\r\n                }\r\n                else {\r\n                    box.addClass('unchecked');\r\n                    box.html('check_box_outline_blank');\r\n                }\r\n            });\r\n\r\n        }\r\n    }\r\n\r\n    $dimensionNeg.click(function () {\r\n        that.Modal.close();\r\n    });\r\n    $(() => that.dimension = new CreateDimensionModal());\r\n};\r\n"]}