{"version":3,"sources":["../../../src/uiStaticFunctions/modal.js"],"names":["__Modal","that","$dimension","$","$dimensionTitle","find","$dimensionContent","$dimensionPos","$dimensionNeg","$dimensionAxisSelector","dimension","summaryUsageDimension","usageDimension","powers","usingDimensions","addUsingDimension","v","i1","name","__Formatter","number","value","appendTo","stats","item","index","mean","min","max","sigma","neg","pos","btn","prependTo","detail","click","hasClass","setUnUsingDimension","setUsingDimension","console","log","attr","remove","f","pig","nig","froms","_","sortBy","from","t","Math","abs","val","forEach","isPos","addSummaryUsageDimension","i2","removeClass","updateRadvisPreview","addClass","addDimensionGroupItem","addAxisList","CreateDimensionModal","dimensionModal","focusout","corrNetwork","injectDataSet","info","data","corr","clearAxisList","keys","c","i","createCorrGraph","CreateCorrNetwork","createComponentDropDown","listItem","selected","mode","setEdge","map","k","cs","x","maxVal","maxIndex","minVal","minIndex","y","push","d","sortable","update","take","open","opt","unbind","close","action","empty","previewOpener","preview","draggable","handle","resizable","on","resizeRadvisPreview","previewEvent","html","svg","d3","select","$previewSvg","resize","radViewSizeX","radViewSizeY","radViewScale","preview_g","append","width","height","usings","cnt","length","radius","drawCircle","u","sin","PI","cos","tx","ty","writeText","Modal"],"mappings":"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","file":"modal.js","sourcesContent":["/**\n * Created by hyunwoo on 2017-03-02.\n */\n\n// setInterval(() => {\n//     console.log(window.performance.memory)\n// }, 1000);\nconst __Modal = new function () {\n    const that = this;\n    const $dimension = $('#modalDimensionFieldMaker');\n\n    var $dimensionTitle = $dimension.find('.title');\n    var $dimensionContent = $dimension.find('.content');\n    var $dimensionPos = $dimension.find('.pos');\n    var $dimensionNeg = $dimension.find('.neg');\n    var $dimensionAxisSelector = $dimension.find('#axisListSelector');\n    this.dimension = {};\n    var summaryUsageDimension = $('#summary-recommend-dimension');\n    var usageDimension = $('#usage-dimension');\n\n\n    var powers = [];\n    var usingDimensions = {};\n\n    function addUsingDimension(v) {\n        let i1 = $(`<div class=\"item _axis\" using=\"${v.name}\">` +\n            `<div class=\"name\">${v.name}</div>` +\n            `<div class=\"num\">${__Formatter.number(v.value)}</div>` +\n            `</div>`).appendTo(usageDimension);\n\n        var stats = v.stats;\n        let item = $(`<div class=\"item _axis\" using=\"${v.name}\" index=\"${stats.index}\">` +\n            `<div class=\"axis\">${v.name}</div>` +\n            `<div class=\"value\">${__Formatter.number(stats.mean)}</div>` +\n            `<div class=\"value\">${__Formatter.number(stats.min)}</div>` +\n            `<div class=\"value\">${__Formatter.number(stats.max)}</div>` +\n            `<div class=\"value\">${__Formatter.number(stats.sigma)}</div>` +\n            `<div class=\"impact neg\">${__Formatter.number(v.neg)}</div>` +\n            `<div class=\"impact pos\">${__Formatter.number(v.pos)}</div>` +\n            `</div>`).appendTo($dimensionAxisSelector);\n\n        var btn = $(`<div class=\"check\"><div class=\"i material-icons\">add_circle_outline</div></div>`).prependTo(item);\n        var detail = $(`<div class=\"detail\"><div class=\"i material-icons\">keyboard_arrow_down</div></div>`).prependTo(item);\n        btn.click(() => {\n            if (item.hasClass('use'))\n                setUnUsingDimension(v);\n            else setUsingDimension(v);\n        });\n        detail.click(() => {\n            console.log('?', item.attr('detail'));\n            if (item.attr('detail') == 'show') {\n                item.attr('detail', 'hide');\n                item.find('.impact-field').remove();\n            } else {\n                item.attr('detail', 'show');\n                var f = $(`<div class=\"impact-field\"></div>`).appendTo(item);\n                var pig = $(`<div class=\"impact-group\">positive impact</div>`).appendTo(f);\n                var nig = $(`<div class=\"impact-group\">negative impact</div>`).appendTo(f);\n\n                var froms = _.sortBy(v.from, (t) => {\n                    return -Math.abs(t.val);\n                });\n                _.forEach(froms, (t) => {\n                    var isPos = t.val > 0;\n                    $(`<div class=\"impact-item ${isPos ? 'pos' : 'neg'}\">${t.name}(${__Formatter.number(t.val)})</div>`).appendTo(isPos ? pig : nig);\n                })\n            }\n        })\n    }\n\n\n    function addSummaryUsageDimension(v) {\n        let i2 = $(`<div class=\"item _axis\" using=\"${v.name}\">${v.name}` +\n            `<div class=\"i material-icons\">add_circle_outline</div>` +\n            `</div>`).appendTo(summaryUsageDimension)\n            .click(() => {\n                if (i2.hasClass('use'))\n                    setUnUsingDimension(v);\n                else setUsingDimension(v);\n            });\n    }\n\n    function setUnUsingDimension(v) {\n        delete usingDimensions[v.name];\n        $(`._axis[using=\"${v.name}\"]`).removeClass('use');\n        updateRadvisPreview();\n    }\n\n    function setUsingDimension(v) {\n        usingDimensions[v.name] = v;\n        $(`._axis[using=\"${v.name}\"]`).addClass('use');\n        updateRadvisPreview();\n    }\n\n    function addDimensionGroupItem(v) {\n        // console.log(v);\n        var abs = Math.abs(v.value);\n        var item;\n        // item = $(`<div class=\"item use\">${v.name}</div>`).appendTo(dgh);\n    }\n\n    function addAxisList(value) {\n\n    }\n\n    function CreateDimensionModal() {\n        var dimensionModal = this;\n        $dimension.find('.step').click(function () {\n            $dimension.find('.step').removeClass('select');\n            $dimension.find('.modal-field .content').removeClass('select');\n\n            $(this).addClass('select');\n            $dimension.find('.modal-field .content[page=' + $(this).attr(\"for\") + ']').addClass('select');\n        });\n\n\n        $('#DFName').focusout(() => {\n            // TODO Save Name TO FB\n        });\n        $('#DFOverview').focusout(() => {\n            // TODO Save Overview TO FB\n        });\n\n        var corrNetwork;\n        this.injectDataSet = function (info, data, corr) {\n            console.log(info, data, corr);\n            clearAxisList();\n            _.forEach(corr.keys, (c, i) => data.stats[c]['index'] = i);\n\n            createCorrGraph('#correlationGraph', corr.keys, corr.corr);\n            corrNetwork = new CreateCorrNetwork('#correlationNetwork', corr.keys, corr.corr);\n            createComponentDropDown('#componentNetwork', {\n                name: \"Correlation Network Link Setting\",\n                listItem: [\n                    'Most Impact (ABS Correlation more that 0.7)',\n                    'Most Impact (ABS Correlation more that 0.5)',\n                    '^# Raw Correlation Graph',\n                    'Almost Same Correlation (Correlation more than 0.9)',\n                    'High Correlation (Correlation more than 0.7)',\n                    'Medium Correlation (Correlation more than 0.5)',\n                ],\n                selected: 'Most Impact (ABS Correlation more that 0.7)',\n            }, (mode) => {\n                corrNetwork.setEdge(mode)\n            });\n\n\n            powers = _.map(corr.keys, (k, i) => {\n                return {value: 0, from: [], name: k, index: i, pos: 0, neg: 0, stats: data.stats[k]};\n            });\n\n            _.forEach(corr.corr, (cs, x) => {\n                var maxVal = 0;\n                var maxIndex = -1;\n                var minVal = 0;\n                var minIndex = -1;\n                _.forEach(cs, (c, y) => {\n                    if (x == y) return;\n                    if (c < -.5) {\n                        minVal = c;\n                        minIndex = y;\n                    } else if (c > .5) {\n                        maxVal = c;\n                        maxIndex = y;\n                    }\n                });\n\n                if (minIndex != -1) {\n                    powers[minIndex].value += Math.abs(minVal);\n                    powers[minIndex].neg += minVal;\n                    powers[minIndex].from.push({\n                        name: corr.keys[x],\n                        index: x,\n                        val: minVal,\n                    });\n                }\n\n                if (maxIndex != -1) {\n                    powers[maxIndex].value += Math.abs(maxVal);\n                    powers[maxIndex].pos += maxVal;\n                    powers[maxIndex].from.push({\n                        name: corr.keys[x],\n                        index: x,\n                        val: maxVal,\n                    });\n                }\n            });\n            powers = _.sortBy(powers, (d) => {\n                return -d.value;\n            });\n\n            _.forEach(powers, (v) => {\n                addAxisList(v);\n                addUsingDimension(v);\n            });\n\n            $('#usage-dimension').sortable({\n                update: (d) => {\n                    updateRadvisPreview();\n                }\n            });\n\n\n            _.forEach(_.take(powers, 10), (v) => {\n                addSummaryUsageDimension(v);\n                setUsingDimension(v);\n            });\n            updateRadvisPreview();\n        };\n\n\n        this.open = function (opt) {\n            $dimension.addClass('open');\n            $dimensionPos.unbind();\n            $dimensionPos.click(function () {\n                that.dimension.close();\n                opt.pos.action()\n            });\n        };\n\n        $dimension.find('.closer').click(function () {\n            console.log('?');\n            that.dimension.close();\n        });\n        this.close = function () {\n            $dimension.removeClass('open');\n        };\n\n        function clearAxisList() {\n            $dimension.find('#axisListSelector').empty();\n        };\n\n\n    }\n\n\n    // PREVIEW\n    var previewOpener = $('#rad-view-opener');\n    var preview = $('#rad-view');\n\n    preview.draggable({handle: '.handle'});\n    preview.resizable();\n    preview.on('resizestop', resizeRadvisPreview);\n    // preview.draggable();\n\n    preview.find('#preview-closer').click(previewEvent);\n    previewOpener.click(previewEvent);\n    function previewEvent() {\n        if (preview.hasClass('open')) {\n            preview.removeClass('open');\n            previewOpener.html('Show Preview Field');\n        }\n        else {\n            preview.addClass('open');\n            previewOpener.html('Hide Preview Field');\n        }\n    }\n\n    var svg = d3.select('#preview-svg');\n    var $previewSvg = $('#preview-svg')\n    $previewSvg.resize(resizeRadvisPreview);\n    var radViewSizeX = 300;\n    var radViewSizeY = 300;\n    var radViewScale = 1;\n    var preview_g = svg.append('g')\n        .attr('transform', `translate(${radViewSizeX / 2},${radViewSizeY / 2}) scale(${radViewScale},${radViewScale})`);\n\n    function resizeRadvisPreview() {\n        radViewSizeX = $previewSvg.width();\n        radViewSizeY = $previewSvg.height();\n        radViewScale = Math.min(radViewSizeY, radViewSizeX) / 300;\n        preview_g.attr('transform', `translate(${radViewSizeX / 2},${radViewSizeY / 2}) scale(${radViewScale},${radViewScale})`);\n        updateRadvisPreview();\n    }\n\n    function updateRadvisPreview() {\n        var usings = usageDimension.find('.item.use .name');\n        var cnt = usings.length;\n        preview_g.html(\"\");\n        var radius = 100;\n        drawCircle(preview_g, 0, 0, radius, radius)\n            .attr('fill', 'none').attr('stroke', '#aaa');\n        _.forEach(usings, (u, i) => {\n            var name = $(u).html();\n            var x = Math.sin(i / cnt * Math.PI * 2) * radius;\n            var y = Math.cos(i / cnt * Math.PI * 2) * radius;\n\n            var tx = Math.sin(i / cnt * Math.PI * 2) * (radius + 10);\n            var ty = Math.cos(i / cnt * Math.PI * 2) * (radius + 10);\n            drawCircle(preview_g, x, y, 4).attr('fill', '#fff')\n                .attr('stroke', '#aaa').attr('stroke-width', 1);\n            writeText(preview_g, name, tx, ty, -i / cnt * 360)\n                .attr('text-anchor', 'middle').attr('font-size', '5px');\n        });\n\n    }\n\n    $dimensionNeg.click(function () {\n        that.Modal.close();\n    });\n    $(() => that.dimension = new CreateDimensionModal());\n};\n"]}